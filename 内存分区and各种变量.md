## 内存分区 和 各种变量

#### 1.内存： 物理内存，虚拟内存

- 物理内存：真实的存储设备

- 虚拟内存：操作系统虚拟出来的内存

这里讲的内存分区  都是 讲的虚拟内存。



操作系统会再物理内存和虚拟内存之间做映射。

在32位系统下，每个进程的寻址范围是4G， 0x00 00 00 00 ~0xff ff ff ff

在写应用程序的时候，我们看到的都是虚拟地址。

**在32位系统中，虚拟内存被分为两个部分，3G的用户空间 和 1G的内核空间，其中 用户空间事当前进程所私有的，内核空间是一个系统中所有的进程所公有的。**



#### 2.运行程序的时候，操作系统会将 虚拟内存进行分区

- 堆：在动态申请内存的时候，在堆里开辟内存
- 栈：主要存放局部变量
- 静态全局区：
  - 1.未初始化的静态全局区：静态变量（static修饰）或全局变量，没有初始化的，存放在此区
  - 2.初始化的静态全局区：全局变量，静态变量，已赋值的，放在此区
- 代码区： 存放程序代码
- 文字常量区：存放常量

## 各种变量

#### 普通的全局变量

在函数外部定义的变量： `int num=100;`

作用范围：程序的所有地方

用前需要声明：`extern int num`，注意声明的时候，不要赋值

注意：定义普通的全局变量的时候，如果没赋初值，系统将其**自动初始化为0**；

```c
#include <stdio.h>

int num;
int main(){
    printf("num = %d \n",num); // 输出为0
    return 0;
}
```

#### 静态全局变量static

用static修饰的全局变量

作用范围：**static限定了此变量只能在它定义的源文件中有效**

#### 普通的局部变量

......

#### 静态的局部变量

用static修饰的局部变量。

作用范围：在定义的函数 或 复合语句 中有效。

- 生命周期：

  - 第一次调用函数的时候，开辟空间赋值，函数结束后，不释放
  - 以后再调用函数的时候，就不再为其开辟空间和赋初值，用的还是以前的这个变量

  静态局部变量只会初始化一次。

#### 外部函数

定义的普通函数，都是外部函数（默认extern），可以在程序的任何一个文件中调用。



在份文件中编程中，只需要将函数的实现写在指定的源文件中，将声明写在头文件中，任何要用此函数的地方，包含头文件即可使用。

#### 内部函数static

定义函数的时候，**返回值类型前加static修饰。**

作用范围：static限定了函数的作用范围，**只在定义的源文件中有效**：即只能在当前定义的源文件中使用。

